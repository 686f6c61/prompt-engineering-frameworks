{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <h1 class="display-4 text-center mb-5">Ayuda y preguntas frecuentes</h1>
    
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto">
            <div class="alert alert-info">
                <div class="d-flex align-items-center">
                    <i class="bi bi-info-circle-fill me-2 fs-4"></i>
                    <div>
                        <strong>Soporte técnico:</strong> Si no encuentras respuesta a tu pregunta, utiliza el formulario de contacto al final de esta página.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Nueva sección: El poder de los frameworks de prompting -->
    <div class="row mb-5">
        <div class="col-lg-10 mx-auto">
            <div class="card bg-light border-primary mb-4">
                <div class="card-body">
                    <h3 class="h5 text-primary"><i class="bi bi-lightning-charge me-2"></i>El poder de los frameworks de prompting</h3>
                    <p class="mb-3">Prompt Agent utiliza un sistema avanzado de análisis para seleccionar el framework ideal entre nuestra colección de 75 marcos especializados. Cada framework está diseñado para maximizar la efectividad de tus interacciones con modelos de lenguaje como OpenAI, Claude, Llama, Deepseek y otros LLMs.</p>
                    
                    <h4 class="h6 mt-4 text-primary"><i class="bi bi-stars me-2"></i>¿Por qué necesitamos buenos prompts?</h4>
                    <p class="mb-3">Los modelos de lenguaje (LLM) dependen enormemente de la calidad y estructura de los prompts que reciben. Un prompt bien estructurado puede:</p>
                    <ul class="mb-3">
                        <li><strong>Reducir la ambigüedad</strong> - Permitiendo respuestas más precisas y relevantes</li>
                        <li><strong>Mejorar la consistencia</strong> - Estructurando la información de manera lógica y coherente</li>
                        <li><strong>Optimizar tokens</strong> - Ahorrando costos al reducir la necesidad de iteraciones y correcciones</li>
                    </ul>
                    
                    <h4 class="h6 mt-4 text-primary"><i class="bi bi-graph-up me-2"></i>Beneficios para Bolt y Lovable</h4>
                    <p>Cuando utilizas Prompt Agent para generar especificaciones para plataformas como <a href="https://bolt.new" target="_blank">Bolt</a> y <a href="https://lovable.dev/?via=prompt-agent" target="_blank">Lovable</a>, obtienes:</p>
                    <ul>
                        <li><strong>Ahorro de tokens</strong> - Las instrucciones claras y estructuradas reducen el procesamiento necesario</li>
                        <li><strong>Mayor precisión</strong> - La estructura correcta ayuda a Bolt/Lovable a entender exactamente qué desarrollar</li>
                        <li><strong>Desarrollo más rápido</strong> - Especificaciones claras reducen el tiempo de implementación</li>
                        <li><strong>Menos iteraciones</strong> - Prompts bien estructurados reducen la necesidad de correcciones y ajustes</li>
                    </ul>
                </div>
            </div>
            
            <div class="card border-primary shadow-sm text-center mb-5 mx-auto" style="max-width: 600px;">
                <div class="card-header bg-primary text-white">
                    <h3 class="h5 mb-0"><i class="bi bi-arrow-right-circle me-2"></i>Proceso</h3>
                </div>
                <div class="card-body py-3">
                    <div class="row justify-content-center">
                        <div class="col-md-10">
                            <div class="d-flex flex-column gap-2">
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-primary rounded-circle me-2">1</span>
                                    <span>Describes tu objetivo</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-primary rounded-circle me-2">2</span>
                                    <span>Nuestro sistema analiza tu necesidad</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-primary rounded-circle me-2">3</span>
                                    <span>Selecciona el framework más apropiado</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-primary rounded-circle me-2">4</span>
                                    <span>Proporciona una explicación detallada</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-primary rounded-circle me-2">5</span>
                                    <span>Muestra un ejemplo práctico de uso</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Resumen de Frameworks -->
    <div class="row mb-5">
        <div class="col-lg-10 mx-auto">
            <div class="text-center mb-4">
                <h2 class="h3 mb-3"><i class="bi bi-table me-2"></i>Resumen de Frameworks</h2>
                
                <div class="d-flex justify-content-center gap-3 mb-4">
                    <a href="/static/frameworks/frameworks.json" download class="btn btn-outline-primary">
                        <i class="bi bi-file-earmark-code me-1"></i> Descargar JSON
                    </a>
                    
                    <button class="btn btn-outline-info" type="button" data-bs-toggle="collapse" data-bs-target="#jsonViewer" aria-expanded="false" aria-controls="jsonViewer">
                        <i class="bi bi-braces me-1"></i> Visualizador JSON
                    </button>
                    
                    <button class="btn btn-outline-success" id="downloadCsvBtn">
                        <i class="bi bi-file-earmark-spreadsheet me-1"></i> Descargar CSV
                    </button>
                    
                    <a href="/download/frameworks" class="btn btn-outline-dark">
                        <i class="bi bi-file-earmark-zip me-1"></i> Descargar todos los frameworks
                    </a>
                </div>
                
                <!-- Visualizador JSON para frikis -->
                <div class="collapse mb-4" id="jsonViewer">
                    <div class="card">
                        <div class="card-header bg-light">
                            <h5 class="mb-0"><i class="bi bi-code-slash me-2"></i>Visualizador de frameworks.json</h5>
                        </div>
                        <div class="card-body">
                            <div class="text-start">
                                <pre id="jsonPreview" class="bg-dark text-light p-3" style="max-height: 400px; overflow: auto; border-radius: 5px;"><code>Cargando JSON...</code></pre>
                            </div>
                            <p class="text-muted small mt-2">Este visualizador muestra el contenido completo del archivo frameworks.json que alimenta esta página.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Botón para mostrar/ocultar la tabla de frameworks -->
                <div class="text-center mb-4">
                    <button class="btn btn-outline-dark" type="button" data-bs-toggle="collapse" data-bs-target="#tableCollapse" aria-expanded="false" aria-controls="tableCollapse">
                        <i class="bi bi-table me-1"></i> Ver tabla de todos los frameworks
                    </button>
                </div>
                
                <!-- Tabla de frameworks (colapsable) -->
                <div class="collapse" id="tableCollapse">
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped table-hover">
                            <thead class="bg-light">
                                <tr>
                                    <th scope="col" class="text-center">#</th>
                                    <th scope="col">Framework</th>
                                    <th scope="col">Componentes</th>
                                    <th scope="col">Ideal para</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-center">1</td>
                                    <td><strong>RTF</strong></td>
                                    <td>Role, Task, Format</td>
                                    <td>Generación de contenido estructurado y tareas específicas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">2</td>
                                    <td><strong>PARA</strong></td>
                                    <td>Purpose, Action, Result, Assessment</td>
                                    <td>Planificación y evaluación de proyectos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">3</td>
                                    <td><strong>SMART</strong></td>
                                    <td>Specific, Measurable, Achievable, Relevant, Time-bound</td>
                                    <td>Definición de objetivos y metas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">4</td>
                                    <td><strong>ERQ</strong></td>
                                    <td>Experience, Requirements, Qualifiers</td>
                                    <td>Definición de perfiles y requisitos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">5</td>
                                    <td><strong>CODE</strong></td>
                                    <td>Context, Objective, Details, Examples</td>
                                    <td>Documentación técnica y guías</td>
                                </tr>
                                <tr>
                                    <td class="text-center">6</td>
                                    <td><strong>PROS</strong></td>
                                    <td>Perspective, Requirements, Outcome, Scope</td>
                                    <td>Planificación de proyectos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">7</td>
                                    <td><strong>TEAM</strong></td>
                                    <td>Task, Environment, Approach, Metrics</td>
                                    <td>Trabajo en equipo y colaboración</td>
                                </tr>
                                <tr>
                                    <td class="text-center">8</td>
                                    <td><strong>IDEA</strong></td>
                                    <td>Identify, Define, Execute, Assess</td>
                                    <td>Resolución de problemas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">9</td>
                                    <td><strong>CARE</strong></td>
                                    <td>Context, Action, Result, Example</td>
                                    <td>Instrucciones detalladas y aprendizaje</td>
                                </tr>
                                <tr>
                                    <td class="text-center">10</td>
                                    <td><strong>RISE</strong></td>
                                    <td>Role, Input, Steps, Expectation</td>
                                    <td>Procesos y flujos de trabajo</td>
                                </tr>
                                <tr>
                                    <td class="text-center">11</td>
                                    <td><strong>LOGIC</strong></td>
                                    <td>Layout, Objective, Guidelines, Implementation, Criteria</td>
                                    <td>Desarrollo de sistemas y procesos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">12</td>
                                    <td><strong>SCOPE</strong></td>
                                    <td>Situation, Core Need, Obstacles, Plan, Evaluation</td>
                                    <td>Definición y gestión de alcance</td>
                                </tr>
                                <tr>
                                    <td class="text-center">13</td>
                                    <td><strong>FOCUS</strong></td>
                                    <td>Frame, Objective, Constraints, Understanding, Solution</td>
                                    <td>Resolución estructurada de problemas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">14</td>
                                    <td><strong>CLARITY</strong></td>
                                    <td>Context, Limitations, Approach, Requirements, Implementation, Timeline, Yield</td>
                                    <td>Gestión de proyectos complejos y migraciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">15</td>
                                    <td><strong>EXPERT</strong></td>
                                    <td>Expertise, Context, Purpose, Execution, Results, Testing</td>
                                    <td>Proyectos técnicos especializados</td>
                                </tr>
                                <tr>
                                    <td class="text-center">16</td>
                                    <td><strong>GUIDE</strong></td>
                                    <td>Goal, User, Implementation, Delivery, Evaluation</td>
                                    <td>Desarrollo de productos y servicios</td>
                                </tr>
                                <tr>
                                    <td class="text-center">17</td>
                                    <td><strong>PATH</strong></td>
                                    <td>Purpose, Approach, Target, Horizon</td>
                                    <td>Planificación estratégica</td>
                                </tr>
                                <tr>
                                    <td class="text-center">18</td>
                                    <td><strong>LEARN</strong></td>
                                    <td>Level, Experience, Approach, Resources, Next steps</td>
                                    <td>Planes de formación y desarrollo</td>
                                </tr>
                                <tr>
                                    <td class="text-center">19</td>
                                    <td><strong>SOLVE</strong></td>
                                    <td>Situation, Options, Limitations, Verification, Execution</td>
                                    <td>Resolución de problemas complejos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">20</td>
                                    <td><strong>PRIME</strong></td>
                                    <td>Problem, Research, Implementation, Monitoring, Evaluation</td>
                                    <td>Proyectos de investigación y desarrollo</td>
                                </tr>
                                <tr>
                                    <td class="text-center">21</td>
                                    <td><strong>ADAPT</strong></td>
                                    <td>Analysis, Design, Approach, Progress, Testing</td>
                                    <td>Proyectos adaptativos y ágiles</td>
                                </tr>
                                <tr>
                                    <td class="text-center">22</td>
                                    <td><strong>BUILD</strong></td>
                                    <td>Baseline, Understanding, Implementation, Learning, Delivery</td>
                                    <td>Desarrollo de nuevos productos o servicios</td>
                                </tr>
                                <tr>
                                    <td class="text-center">23</td>
                                    <td><strong>CRAFT</strong></td>
                                    <td>Context, Requirements, Approach, Features, Testing</td>
                                    <td>Desarrollo de soluciones a medida</td>
                                </tr>
                                <tr>
                                    <td class="text-center">24</td>
                                    <td><strong>SCALE</strong></td>
                                    <td>Strategy, Capabilities, Action, Learning, Evolution</td>
                                    <td>Escalamiento de proyectos y operaciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">25</td>
                                    <td><strong>THINK</strong></td>
                                    <td>Topic, History, Insights, Next steps, Knowledge</td>
                                    <td>Análisis estratégico y toma de decisiones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">26</td>
                                    <td><strong>GROW</strong></td>
                                    <td>Goal, Reality, Options, Way Forward</td>
                                    <td>Coaching y desarrollo personal</td>
                                </tr>
                                <tr>
                                    <td class="text-center">27</td>
                                    <td><strong>QUEST</strong></td>
                                    <td>Question, Understanding, Exploration, Solution, Testing</td>
                                    <td>Investigación y resolución de problemas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">28</td>
                                    <td><strong>DRIVE</strong></td>
                                    <td>Direction, Resources, Implementation, Validation, Evolution</td>
                                    <td>Gestión de proyectos innovadores</td>
                                </tr>
                                <tr>
                                    <td class="text-center">29</td>
                                    <td><strong>SHAPE</strong></td>
                                    <td>Situation, History, Analysis, Plan, Execution</td>
                                    <td>Transformación organizacional</td>
                                </tr>
                                <tr>
                                    <td class="text-center">30</td>
                                    <td><strong>REACH</strong></td>
                                    <td>Requirements, Evaluation, Approach, Completion, Handover</td>
                                    <td>Gestión de proyectos end-to-end</td>
                                </tr>
                                <tr>
                                    <td class="text-center">31</td>
                                    <td><strong>BLEND</strong></td>
                                    <td>Baseline, Learning, Evolution, Navigation, Delivery</td>
                                    <td>Proyectos híbridos y metodologías mixtas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">32</td>
                                    <td><strong>SPARK</strong></td>
                                    <td>Strategy, Planning, Action, Results, Knowledge</td>
                                    <td>Iniciativas de innovación</td>
                                </tr>
                                <tr>
                                    <td class="text-center">33</td>
                                    <td><strong>PULSE</strong></td>
                                    <td>Purpose, Understanding, Learning, Strategy, Evaluation</td>
                                    <td>Monitoreo y mejora continua</td>
                                </tr>
                                <tr>
                                    <td class="text-center">34</td>
                                    <td><strong>FAST</strong></td>
                                    <td>Focus, Audience, Scope, Tone</td>
                                    <td>Documentación técnica y guías de usuario</td>
                                </tr>
                                <tr>
                                    <td class="text-center">35</td>
                                    <td><strong>TAG</strong></td>
                                    <td>Tarea, Acción, Meta</td>
                                    <td>Proyectos con objetivos medibles y acciones concretas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">36</td>
                                    <td><strong>BAB</strong></td>
                                    <td>Antes, Después, Puente</td>
                                    <td>Mostrar cambios y mejoras con un plan claro</td>
                                </tr>
                                <tr>
                                    <td class="text-center">37</td>
                                    <td><strong>PEAS</strong></td>
                                    <td>Propósito, Resultado, Audiencia, Estilo</td>
                                    <td>Estrategias de comunicación y marketing</td>
                                </tr>
                                <tr>
                                    <td class="text-center">38</td>
                                    <td><strong>STAR</strong></td>
                                    <td>Situación, Tarea, Acción, Resultado</td>
                                    <td>Documentar logros y experiencias</td>
                                </tr>
                                <tr>
                                    <td class="text-center">39</td>
                                    <td><strong>QCQA</strong></td>
                                    <td>Pregunta, Contexto, Calificación, Respuesta</td>
                                    <td>Consultas estructuradas para resolver problemas paso a paso</td>
                                </tr>
                                <tr>
                                    <td class="text-center">40</td>
                                    <td><strong>AIDA</strong></td>
                                    <td>Atención, Interés, Deseo, Acción</td>
                                    <td>Marketing persuasivo y creación de campañas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">41</td>
                                    <td><strong>LEAP</strong></td>
                                    <td>Nivel, Expectativas, Enfoque, Parámetros</td>
                                    <td>Planificación estratégica</td>
                                </tr>
                                <tr>
                                    <td class="text-center">42</td>
                                    <td><strong>SPIN</strong></td>
                                    <td>Situación, Problema, Implicación, Necesidad</td>
                                    <td>Ventas consultivas y negociación</td>
                                </tr>
                                <tr>
                                    <td class="text-center">43</td>
                                    <td><strong>DESIGN</strong></td>
                                    <td>Define, Explore, Scope, Ideate, Guide, Narrow</td>
                                    <td>Procesos de diseño y desarrollo</td>
                                </tr>
                                <tr>
                                    <td class="text-center">44</td>
                                    <td><strong>VISION</strong></td>
                                    <td>Visualize, Identify, Structure, Implement, Optimize, Navigate</td>
                                    <td>Planificación estratégica</td>
                                </tr>
                                <tr>
                                    <td class="text-center">45</td>
                                    <td><strong>IMPACT</strong></td>
                                    <td>Intent, Message, Purpose, Audience, Channel, Timing</td>
                                    <td>Estrategias de comunicación</td>
                                </tr>
                                <tr>
                                    <td class="text-center">46</td>
                                    <td><strong>MASTER</strong></td>
                                    <td>Mission, Approach, Strategy, Tactics, Execution, Review</td>
                                    <td>Gestión de proyectos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">47</td>
                                    <td><strong>POWER</strong></td>
                                    <td>Problem, Outcome, Why, Execution, Resources</td>
                                    <td>Resolución de problemas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">48</td>
                                    <td><strong>CREATE</strong></td>
                                    <td>Context, Requirements, Examples, Alternatives, Testing, Evaluation</td>
                                    <td>Procesos creativos y desarrollo de soluciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">49</td>
                                    <td><strong>FLOW</strong></td>
                                    <td>Focus, Limits, Outcomes, Work</td>
                                    <td>Optimización de procesos y productividad</td>
                                </tr>
                                <tr>
                                    <td class="text-center">50</td>
                                    <td><strong>BOLT</strong></td>
                                    <td>Business, Operations, Legal, Technical</td>
                                    <td>Análisis empresarial integral</td>
                                </tr>
                                <tr>
                                    <td class="text-center">51</td>
                                    <td><strong>PACE</strong></td>
                                    <td>Purpose, Audience, Content, Expression</td>
                                    <td>Comunicación efectiva y presentaciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">52</td>
                                    <td><strong>AGILE</strong></td>
                                    <td>Adaptable, Goal-oriented, Iterative, Lightweight, Efficient</td>
                                    <td>Desarrollo ágil y gestión de proyectos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">53</td>
                                    <td><strong>SEED</strong></td>
                                    <td>Situation, Expectation, Execution, Delivery</td>
                                    <td>Implementación de proyectos desde cero</td>
                                </tr>
                                <tr>
                                    <td class="text-center">54</td>
                                    <td><strong>SHIFT</strong></td>
                                    <td>Situation, Hurdles, Innovation, Framework, Transition</td>
                                    <td>Gestión del cambio y transformación</td>
                                </tr>
                                <tr>
                                    <td class="text-center">55</td>
                                    <td><strong>LIFT</strong></td>
                                    <td>Learning, Implementation, Feedback, Transformation</td>
                                    <td>Mejora continua y aprendizaje</td>
                                </tr>
                                <tr>
                                    <td class="text-center">56</td>
                                    <td><strong>PATHS</strong></td>
                                    <td>Problem, Alternatives, Tradeoffs, Hypothesis, Solution</td>
                                    <td>Toma de decisiones complejas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">57</td>
                                    <td><strong>FASTER</strong></td>
                                    <td>Focus, Analysis, Solution, Testing, Evaluation, Refinement</td>
                                    <td>Desarrollo rápido y optimización</td>
                                </tr>
                                <tr>
                                    <td class="text-center">58</td>
                                    <td><strong>VALUE</strong></td>
                                    <td>Vision, Approach, Leverage, Understanding, Execution</td>
                                    <td>Creación de valor empresarial</td>
                                </tr>
                                <tr>
                                    <td class="text-center">59</td>
                                    <td><strong>SMARTER</strong></td>
                                    <td>Specific, Measurable, Achievable, Relevant, Time-bound, Evaluate, Reassess</td>
                                    <td>Definición y seguimiento de objetivos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">60</td>
                                    <td><strong>GRIT</strong></td>
                                    <td>Goal, Resources, Impediments, Timeline</td>
                                    <td>Gestión de proyectos con objetivos desafiantes</td>
                                </tr>
                                <tr>
                                    <td class="text-center">61</td>
                                    <td><strong>GLIDE</strong></td>
                                    <td>Goal, Limitations, Implementation, Development, Evaluation</td>
                                    <td>Desarrollo de productos de forma eficiente</td>
                                </tr>
                                <tr>
                                    <td class="text-center">62</td>
                                    <td><strong>PIVOT</strong></td>
                                    <td>Problem, Investigation, Verification, Opportunity, Transformation</td>
                                    <td>Adaptación y gestión del cambio</td>
                                </tr>
                                <tr>
                                    <td class="text-center">63</td>
                                    <td><strong>EPIC</strong></td>
                                    <td>Expectation, Plan, Implementation, Completion</td>
                                    <td>Gestión de proyectos con entregables claros</td>
                                </tr>
                                <tr>
                                    <td class="text-center">64</td>
                                    <td><strong>SCQA</strong></td>
                                    <td>Situation, Complication, Question, Answer</td>
                                    <td>Comunicación persuasiva y presentaciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">65</td>
                                    <td><strong>SOAR</strong></td>
                                    <td>Strengths, Opportunities, Aspirations, Results</td>
                                    <td>Planificación estratégica positiva</td>
                                </tr>
                                <tr>
                                    <td class="text-center">66</td>
                                    <td><strong>CFT</strong></td>
                                    <td>Context, Focus, Transformation</td>
                                    <td>Gestión del cambio y transformaciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">67</td>
                                    <td><strong>TAR</strong></td>
                                    <td>Trigger, Action, Result</td>
                                    <td>Análisis conductual y cambio de hábitos</td>
                                </tr>
                                <tr>
                                    <td class="text-center">68</td>
                                    <td><strong>PACE</strong></td>
                                    <td>Primary goal, Alternatives, Consequences, Environment</td>
                                    <td>Toma de decisiones complejas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">69</td>
                                    <td><strong>FAB</strong></td>
                                    <td>Features, Advantages, Benefits</td>
                                    <td>Marketing y comunicación de producto</td>
                                </tr>
                                <tr>
                                    <td class="text-center">70</td>
                                    <td><strong>AOR</strong></td>
                                    <td>Action, Outcome, Reflection</td>
                                    <td>Aprendizaje experiencial y mejora</td>
                                </tr>
                                <tr>
                                    <td class="text-center">71</td>
                                    <td><strong>SPQA</strong></td>
                                    <td>Situation, Problem, Question, Answer</td>
                                    <td>Resolución estructurada de problemas</td>
                                </tr>
                                <tr>
                                    <td class="text-center">72</td>
                                    <td><strong>SARA</strong></td>
                                    <td>Shock, Anger, Resistance, Acceptance</td>
                                    <td>Gestión del cambio y transiciones</td>
                                </tr>
                                <tr>
                                    <td class="text-center">73</td>
                                    <td><strong>GEAR</strong></td>
                                    <td>Goal, Execute, Assess, Reflect</td>
                                    <td>Mejora continua y ciclos de aprendizaje</td>
                                </tr>
                                <tr>
                                    <td class="text-center">74</td>
                                    <td><strong>BRIDGE</strong></td>
                                    <td>Background, Reason, Information, Decision, Goal, Evaluation</td>
                                    <td>Comunicaciones corporativas y cambios organizacionales</td>
                                </tr>
                                <tr>
                                    <td class="text-center">75</td>
                                    <td><strong>CLEAR</strong></td>
                                    <td>Connect, Listen, Explore, Action, Reflect</td>
                                    <td>Comunicación interpersonal y coaching</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sección de FAQ -->
    <div class="row mb-5">
        <div class="col-lg-10 mx-auto">
            <div class="accordion" id="accordionFAQ">
                <!-- Grupo 1: Preguntas sobre versión gratuita -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <i class="bi bi-patch-check text-success me-2"></i> Versión Gratuita
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionFAQ">
                        <div class="accordion-body">
                            <div class="mb-4">
                                <h5>¿Qué limitaciones tiene la versión gratuita?</h5>
                                <p>La versión gratuita utiliza el modelo GPT-4o-mini con hasta 4000 tokens por consulta y está limitada a 10 solicitudes por hora por usuario. Esta versión es perfecta para usuarios ocasionales que quieren mejorar sus prompts sin necesidad de una API key propia.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>¿Necesito crear una cuenta para usar la versión gratuita?</h5>
                                <p>No, Prompt Agent no requiere registro ni creación de cuenta para la versión gratuita. Simplemente accede a la web y comienza a generar prompts estructurados inmediatamente.</p>
                            </div>
                            
                            <div>
                                <h5>¿Cómo se cuentan las 10 solicitudes por hora?</h5>
                                <p>Cada vez que generas un prompt completo o solicitas una recomendación de framework, se cuenta como una solicitud. El contador se reinicia automáticamente cada hora. Puedes ver tu uso actual en la interfaz de la aplicación.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Grupo 2: Preguntas sobre o4-mini -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            <i class="bi bi-stars text-warning me-2"></i> Modelo Premium (GPT-4o)
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionFAQ">
                        <div class="accordion-body">
                            <div class="mb-4">
                                <h5>¿Qué ventajas ofrece el modelo GPT-4o?</h5>
                                <p>El modelo premium GPT-4o ofrece una calidad superior en la generación de prompts, con mayor precisión, contexto y creatividad. Además de disponer de hasta 8000 tokens por consulta, al usar tu propia API key, no tienes limitaciones en el número de solicitudes que puedes realizar por hora.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>¿Cómo puedo acceder al modelo premium?</h5>
                                <p>Para utilizar el modelo premium, necesitas configurar tu propia API key de OpenAI. Ve a la sección de "Configuración" en el menú principal, selecciona la opción "Usar API key personal" e introduce tu clave. Esta configuración se guarda en tu navegador durante 30 días.</p>
                            </div>
                            
                            <div>
                                <h5>¿Puedo alternar entre la versión gratuita y premium?</h5>
                                <p>Sí, puedes cambiar entre ambos modelos en cualquier momento desde la sección de "Configuración". Si decides volver a la versión gratuita, simplemente selecciona esa opción y tu API key se eliminará de la sesión.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Grupo 3: Preguntas sobre privacidad de API key -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            <i class="bi bi-shield-lock text-primary me-2"></i> Privacidad de API Key
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionFAQ">
                        <div class="accordion-body">
                            <div class="mb-4">
                                <h5>¿Es seguro proporcionar mi API key?</h5>
                                <p>Tu API key se almacena exclusivamente en la sesión de tu navegador mediante cookies cifradas y nunca se envía a nuestros servidores. Prompt Agent utiliza un enfoque de "client-side" para manejar las solicitudes a la API de OpenAI directamente desde tu navegador.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>¿Por qué no pueden acceder a mi API key aunque la introduzca en la aplicación?</h5>
                                <p><strong>Explicación técnica:</strong> Utilizamos un patrón de arquitectura que separa completamente el manejo de la API key del servidor. Cuando introduces tu clave, esta se almacena mediante <code>sessionStorage</code> en tu navegador y se cifra con una clave generada localmente. Las solicitudes a OpenAI se realizan directamente desde tu navegador mediante peticiones CORS, sin pasar por nuestros servidores. Además, implementamos una política de Content Security Policy (CSP) estricta que impide cualquier filtración de datos a dominios no autorizados.</p>
                            </div>
                            
                            <div>
                                <h5>¿Dónde se guardan mis prompts generados?</h5>
                                <p>Los prompts generados se procesan localmente en tu navegador y no se almacenan en nuestros servidores. Toda la información generada permanece en tu dispositivo a menos que decidas exportarla manualmente. Nuestro sistema está diseñado para maximizar la privacidad y seguridad de tus datos.</p>
                            </div>
                            
                            <div>
                                <h5>¿Dónde está alojada la aplicación y sus datos?</h5>
                                <p>Prompt Agent está alojado en la plataforma Render, cuyos servidores para aplicaciones web se encuentran ubicados en Irlanda, dentro del territorio de la Unión Europea. Esto garantiza que cualquier procesamiento de datos se realiza conforme al RGPD y otras normativas europeas de protección de datos, sin transferencias internacionales fuera del Espacio Económico Europeo.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Grupo 4: Preguntas sobre frameworks -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            <i class="bi bi-grid-3x3-gap text-danger me-2"></i> Frameworks
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionFAQ">
                        <div class="accordion-body">
                            <div class="mb-4">
                                <h5>¿Cómo se seleccionan los frameworks para mi objetivo?</h5>
                                <p>Prompt Agent analiza tu objetivo utilizando algoritmos de procesamiento de lenguaje natural para identificar patrones, intenciones y contexto. Basándose en este análisis, el sistema selecciona el framework más adecuado de nuestra biblioteca de 75 frameworks especializados, ahora organizados en categorías como desarrollo de productos, comunicación, mejora continua, gestión de equipos y transformación, para diferentes tipos de tareas.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>¿Puedo combinar varios frameworks en un solo prompt?</h5>
                                <p>Actualmente, Prompt Agent está optimizado para utilizar un framework a la vez, seleccionando el más adecuado para tu objetivo específico. Esto garantiza resultados más precisos y coherentes. En futuras actualizaciones, exploraremos la posibilidad de combinar frameworks para casos de uso más complejos.</p>
                            </div>
                            
                            <div>
                                <h5>¿Puedo descargar todos los frameworks para estudiarlos?</h5>
                                <p>Sí, ofrecemos la opción de descargar la colección completa de frameworks en formato ZIP desde la sección "Resumen de Frameworks" en esta página. Esto te permite estudiar cada estructura en detalle y aplicarlas manualmente si lo prefieres.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grupo 5: Preguntas generales -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                            <i class="bi bi-question-circle text-success me-2"></i> Preguntas generales
                        </button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionFAQ">
                        <div class="accordion-body">
                            <div class="mb-4">
                                <h5>¿Prompt Agent es realmente gratuito? ¿Hay algún tipo de publicidad o planes premium?</h5>
                                <p>Sí, Prompt Agent es completamente gratuito. No tenemos planes de pago, no incluimos publicidad en la plataforma y el proyecto tiene un propósito educativo y de divulgación, sin objetivos comerciales. El servicio se ofrece tal cual, sin costes ocultos ni intención de monetización futura.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>¿Cómo funciona el generador Bolt/Lovable?</h5>
                                <p>El generador Bolt/Lovable es una herramienta especializada para crear documentación técnica y especificaciones para proyectos web. Utiliza frameworks optimizados para plataformas de desarrollo como Bolt y Lovable, generando prompts detallados que incluyen contexto del proyecto, requisitos técnicos, estructura de componentes y estrategias de implementación.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>¿Con qué frecuencia se añaden nuevos frameworks?</h5>
                                <p>Actualizamos nuestra biblioteca de frameworks regularmente, añadiendo nuevas estructuras a medida que evolucionan las mejores prácticas en prompt engineering. Realizamos actualizaciones aproximadamente cada 2-3 meses, pero también incorporamos frameworks específicos cuando identificamos necesidades emergentes.</p>
                            </div>
                            
                            <div>
                                <h5>¿Puedo sugerir un nuevo framework para incluir?</h5>
                                <p>¡Absolutamente! Valoramos las contribuciones de la comunidad. Puedes sugerir nuevos frameworks utilizando el formulario de contacto al final de esta página, o a través de nuestro repositorio de GitHub si prefieres un enfoque más técnico.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Formulario de contacto -->
    <div class="row mt-5 pt-4">
        <div class="col-lg-8 mx-auto">
            <!-- Información sobre aumento de límite gratuito -->
            <div class="alert alert-info mb-4 border-0 shadow-sm">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0 me-3">
                        <i class="bi bi-speedometer2 text-primary" style="font-size: 2rem;"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="alert-heading mb-1">
                            <i class="bi bi-stars me-1"></i> ¿Necesitas más solicitudes gratuitas?
                        </h5>
                        <p class="mb-1">Si estás trabajando en un proyecto educativo o de investigación y necesitas aumentar el límite gratuito de 10 a 30 solicitudes por hora, explícanos tu caso utilizando el formulario de contacto a continuación.</p>
                        <hr class="my-2">
                        <p class="mb-0 small">
                            <i class="bi bi-info-circle me-1"></i> Menciona "Solicitud de código promocional" en el asunto e incluye detalles sobre tu proyecto.
                        </p>
                    </div>
                </div>
            </div>

            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h2 class="h4 mb-4 text-center">Formulario de contacto</h2>
                    
                    <form id="contactForm" class="needs-validation" novalidate>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="nombre" class="form-label">Nombre</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-person"></i></span>
                                    <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Tu nombre" required>
                                </div>
                                <div class="invalid-feedback">
                                    Por favor introduce tu nombre
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                                    <input type="email" class="form-control" id="email" name="email" placeholder="tu@email.com" required>
                                </div>
                                <div class="invalid-feedback">
                                    Por favor introduce un email válido
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="asunto" class="form-label">Asunto</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-chat-square-text"></i></span>
                                    <select class="form-select" id="asunto" name="asunto" required>
                                        <option value="" selected disabled>Selecciona</option>
                                        <option value="Solicitud de código promocional">Código promocional</option>
                                        <option value="Consulta general">Consulta</option>
                                        <option value="Sugerencia">Sugerencia</option>
                                        <option value="Reporte de error">Error</option>
                                        <option value="Propuesta de nuevo framework">Nuevo framework</option>
                                        <option value="Otro">Otro</option>
                                    </select>
                                </div>
                                <div class="invalid-feedback">
                                    Por favor selecciona el asunto
                                </div>
                            </div>
                            <div class="col-12" id="otroAsuntoContainer" style="display: none;">
                                <label for="otroAsunto" class="form-label">Especifica el asunto</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-pencil"></i></span>
                                    <input type="text" class="form-control" id="otroAsunto" name="otroAsunto" placeholder="Especifica el asunto de tu mensaje">
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="mensaje" class="form-label">Mensaje</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-chat-dots"></i></span>
                                    <textarea class="form-control" id="mensaje" name="mensaje" rows="5" placeholder="Escribe tu mensaje aquí..." required></textarea>
                                </div>
                                <div class="invalid-feedback">
                                    Por favor introduce tu mensaje
                                </div>
                            </div>
                            
                            <!-- Captcha ofuscado contra bots -->
                            <div class="col-12 mt-3">
                                <label class="form-label mb-2">Verificación de seguridad <small class="text-muted">(protección anti-spam)</small></label>
                                <div class="row g-0 align-items-center">
                                    <div class="col-auto">
                                        <div class="bg-light px-3 py-2 rounded-start d-flex align-items-center captcha-question" id="captchaQuestion" style="height: 38px; user-select: none;">
                                            <span class="captcha-text">Resuelve: </span>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-4">
                                        <input type="text" class="form-control rounded-start-0" id="captchaAnswer" placeholder="Respuesta" required autocomplete="off">
                                    </div>
                                    <div class="col-auto ps-2">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="refreshCaptcha" title="Generar nuevo captcha">
                                            <i class="bi bi-arrow-clockwise"></i>
                                        </button>
                                    </div>
                                    <div class="invalid-feedback">
                                        Respuesta incorrecta, inténtalo de nuevo
                                    </div>
                                </div>
                                <small class="text-muted" id="captchaInstruccion"></small>
                            </div>
                            
                            <div class="col-12 mt-4">
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-primary px-5">
                                        <i class="bi bi-send me-2"></i>Enviar mensaje
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                    
                    <!-- Mensaje de éxito (oculto por defecto) -->
                    <div class="alert alert-success mt-4 d-none" id="mensajeExito">
                        <i class="bi bi-check-circle me-2"></i>
                        Tu mensaje ha sido enviado correctamente. Te responderemos lo antes posible.
                    </div>
                    
                    <!-- Mensaje de error (oculto por defecto) -->
                    <div class="alert alert-danger mt-4 d-none" id="mensajeError">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        Ha ocurrido un error al enviar el mensaje. Por favor intenta nuevamente más tarde.
                    </div>
                    
                    <!-- Nota sobre privacidad de datos -->
                    <div class="mt-4 pt-2 small text-muted">
                        <p><i class="bi bi-info-circle me-1"></i> <strong>Nota sobre privacidad:</strong> Los datos proporcionados en este formulario son procesados mediante Resend (un servicio de correo electrónico) y solo son utilizados para responder a su consulta. No almacenamos permanentemente esta información. Para más detalles, consulte la sección de <a href="/terminos#privacidad">protección de datos y privacidad</a> en nuestros términos y condiciones.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Generar captcha aleatorio
    function generarCaptcha() {
        // Diferentes tipos de captcha
        const captchaTypes = [
            'suma', 'resta', 'multiplicacion', 'palabra', 'secuencia', 'texto'
        ];
        
        // Elegir aleatoriamente el tipo de captcha
        const captchaType = captchaTypes[Math.floor(Math.random() * captchaTypes.length)];
        let instruccion = '';
        let correctAnswer;
        let captchaDisplay = '';
        
        // Generar captcha según el tipo
        switch(captchaType) {
            case 'suma':
                const num1Suma = Math.floor(Math.random() * 20) + 10; // 10-30
                const num2Suma = Math.floor(Math.random() * 15) + 5;  // 5-20
                correctAnswer = num1Suma + num2Suma;
                // Ofuscar un poco el display
                captchaDisplay = `${obfuscarNumero(num1Suma)} + ${obfuscarNumero(num2Suma)}`;
                instruccion = "Calcula la suma";
                break;
                
            case 'resta':
                const num1Resta = Math.floor(Math.random() * 30) + 30; // 30-60
                const num2Resta = Math.floor(Math.random() * 20) + 5;  // 5-25
                correctAnswer = num1Resta - num2Resta;
                captchaDisplay = `${obfuscarNumero(num1Resta)} - ${obfuscarNumero(num2Resta)}`;
                instruccion = "Calcula la resta";
                break;
                
            case 'multiplicacion':
                const num1Mult = Math.floor(Math.random() * 8) + 2;  // 2-10
                const num2Mult = Math.floor(Math.random() * 5) + 2;  // 2-7
                correctAnswer = num1Mult * num2Mult;
                captchaDisplay = `${obfuscarNumero(num1Mult)} × ${obfuscarNumero(num2Mult)}`;
                instruccion = "Calcula la multiplicación";
                break;
                
            case 'palabra':
                // Palabras simples invertidas
                const palabras = ['casa', 'mesa', 'libro', 'reloj', 'campo', 'cifra', 'mundo', 'clave', 'pista', 'forma'];
                const palabraSeleccionada = palabras[Math.floor(Math.random() * palabras.length)];
                const palabraInvertida = palabraSeleccionada.split('').reverse().join('');
                
                captchaDisplay = `${palabraInvertida}`;
                correctAnswer = palabraSeleccionada;
                instruccion = "Escribe esta palabra al revés";
                break;
                
            case 'secuencia':
                // Secuencia de números
                const inicioSecuencia = Math.floor(Math.random() * 5) + 1; // 1-6
                const incremento = Math.floor(Math.random() * 3) + 1;     // 1-4
                const secuencia = [
                    inicioSecuencia,
                    inicioSecuencia + incremento,
                    inicioSecuencia + (incremento * 2),
                    inicioSecuencia + (incremento * 3)
                ];
                const siguienteNumero = inicioSecuencia + (incremento * 4);
                
                captchaDisplay = `${secuencia.join(', ')}, ?`;
                correctAnswer = siguienteNumero.toString();
                instruccion = "¿Cuál es el siguiente número en la secuencia?";
                break;
                
            case 'texto':
                // Contar letras en una palabra
                const palabrasContar = ['programación', 'algoritmo', 'desarrollo', 'estructura', 'aplicación', 'captcha', 'seguridad', 'prompt'];
                const palabraParaContar = palabrasContar[Math.floor(Math.random() * palabrasContar.length)];
                const letraBuscada = palabraParaContar[Math.floor(Math.random() * palabraParaContar.length)];
                
                // Contar ocurrencias
                let conteo = 0;
                for(let i = 0; i < palabraParaContar.length; i++) {
                    if(palabraParaContar[i] === letraBuscada) {
                        conteo++;
                    }
                }
                
                captchaDisplay = `"${palabraParaContar}" → letra "${letraBuscada}"`;
                correctAnswer = conteo.toString();
                instruccion = "Cuenta cuántas veces aparece la letra indicada";
                break;
        }
        
        // Actualizar display
        const captchaElement = document.getElementById('captchaQuestion');
        captchaElement.innerHTML = `<span class="captcha-text">Resuelve: </span><span class="challenge">${captchaDisplay}</span>`;
        document.getElementById('captchaInstruccion').textContent = instruccion;
        
        // Guardar la respuesta correcta y el tipo
        captchaElement.dataset.correctAnswer = correctAnswer.toString();
        captchaElement.dataset.captchaType = captchaType;
    }
    
    // Función para ofuscar números (para dificultar scraping)
    function obfuscarNumero(num) {
        // Convertir a string y añadir espacios invisibles o entidades unicode
        const numStr = num.toString();
        let resultado = '';
        
        for (let i = 0; i < numStr.length; i++) {
            resultado += numStr[i];
            // Añadir caracteres invisibles entre dígitos
            if (i < numStr.length - 1) {
                // Agregar un espacio de ancho cero ocasionalmente
                if (Math.random() > 0.5) {
                    resultado += '&#8203;';
                }
            }
        }
        
        return resultado;
    }
    
    // Generar captcha al cargar la página
    generarCaptcha();
    
    // Botón de refrescar captcha
    document.getElementById('refreshCaptcha').addEventListener('click', function() {
        generarCaptcha();
        document.getElementById('captchaAnswer').value = '';
        document.getElementById('captchaAnswer').classList.remove('is-invalid');
    });
    
    // Validación del formulario
    const form = document.getElementById('contactForm');
    
    form.addEventListener('submit', function(event) {
        event.preventDefault();
        
        // Verificar captcha
        const captchaAnswer = document.getElementById('captchaAnswer').value.trim().toLowerCase();
        const correctAnswer = document.getElementById('captchaQuestion').dataset.correctAnswer.toLowerCase();
        const captchaType = document.getElementById('captchaQuestion').dataset.captchaType;
        
        // Para mayor seguridad, comprobar específicamente según el tipo
        let isValid = false;
        
        if (captchaType === 'palabra') {
            // Para palabras, verificar que coincidan exactamente (ignorando mayúsculas/minúsculas)
            isValid = captchaAnswer === correctAnswer;
        } else if (['suma', 'resta', 'multiplicacion', 'secuencia', 'texto'].includes(captchaType)) {
            // Para operaciones numéricas, verificar el valor como número
            isValid = parseInt(captchaAnswer) === parseInt(correctAnswer);
        } else {
            // Fallback para otros tipos
            isValid = captchaAnswer === correctAnswer;
        }
        
        if (!isValid) {
            document.getElementById('captchaAnswer').classList.add('is-invalid');
            return;
        }
        
        // Validar el resto del formulario
        if (!form.checkValidity()) {
            event.stopPropagation();
            form.classList.add('was-validated');
            return;
        }
        
        // Si todo es válido, procesar el formulario
        const formData = {
            nombre: document.getElementById('nombre').value,
            email: document.getElementById('email').value,
            asunto: document.getElementById('asunto').value === 'Otro' ? document.getElementById('otroAsunto').value : document.getElementById('asunto').value,
            mensaje: document.getElementById('mensaje').value
        };
        
        // Deshabilitar el botón de envío y mostrar indicador de carga
        const submitButton = form.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;
        submitButton.disabled = true;
        submitButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Enviando...';
        
        // Ocultar mensajes previos
        document.getElementById('mensajeExito').classList.add('d-none');
        document.getElementById('mensajeError').classList.add('d-none');
        
        // Enviar datos al endpoint
        fetch('/api/enviar-correo', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Mostrar mensaje de éxito
                document.getElementById('mensajeExito').textContent = data.message || 'Tu mensaje ha sido enviado correctamente. Te responderemos lo antes posible.';
                document.getElementById('mensajeExito').classList.remove('d-none');
                
                // Reiniciar formulario
                form.reset();
                form.classList.remove('was-validated');
                
                // Generar nuevo captcha
                generarCaptcha();
                document.getElementById('captchaAnswer').value = '';
            } else {
                // Mostrar mensaje de error
                document.getElementById('mensajeError').textContent = data.error || 'Ha ocurrido un error al enviar el mensaje. Por favor intenta nuevamente más tarde.';
                document.getElementById('mensajeError').classList.remove('d-none');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('mensajeError').textContent = 'Ha ocurrido un error al procesar tu solicitud. Por favor intenta más tarde.';
            document.getElementById('mensajeError').classList.remove('d-none');
        })
        .finally(() => {
            // Restaurar botón
            submitButton.disabled = false;
            submitButton.innerHTML = originalButtonText;
        });
    });
    
    // Restablecer estado del captcha cuando se modifica
    document.getElementById('captchaAnswer').addEventListener('input', function() {
        this.classList.remove('is-invalid');
    });
    
    // Manejar el cambio en el selector de asunto
    const asuntoSelect = document.getElementById('asunto');
    const otroAsuntoContainer = document.getElementById('otroAsuntoContainer');
    const otroAsuntoInput = document.getElementById('otroAsunto');
    
    asuntoSelect.addEventListener('change', function() {
        if (this.value === 'Otro') {
            otroAsuntoContainer.style.display = 'block';
            otroAsuntoInput.setAttribute('required', true);
        } else {
            otroAsuntoContainer.style.display = 'none';
            otroAsuntoInput.removeAttribute('required');
        }
    });
    
    // Preseleccionar asunto cuando se hace clic en la información de código promocional
    document.querySelector('.alert-info').addEventListener('click', function() {
        asuntoSelect.value = 'Solicitud de código promocional';
        // Disparar el evento change para actualizar cualquier lógica dependiente
        const event = new Event('change');
        asuntoSelect.dispatchEvent(event);
    });
    
    // Script para el visualizador JSON
    const jsonViewerBtn = document.querySelector('[data-bs-target="#jsonViewer"]');
    const jsonPreview = document.getElementById('jsonPreview');
    let jsonLoaded = false;
    
    jsonViewerBtn.addEventListener('click', function() {
        if (!jsonLoaded) {
            fetch('/static/frameworks/frameworks.json')
                .then(response => response.json())
                .then(data => {
                    jsonPreview.innerHTML = JSON.stringify(data, null, 2);
                    jsonLoaded = true;
                    
                    // Opcional: Aplicar resaltado de sintaxis si tienes una biblioteca como highlight.js
                    if (typeof hljs !== 'undefined') {
                        hljs.highlightElement(jsonPreview);
                    }
                })
                .catch(error => {
                    jsonPreview.innerHTML = `Error al cargar el JSON: ${error}`;
                });
        }
    });
    
    // Script para descargar CSV
    document.getElementById('downloadCsvBtn').addEventListener('click', function() {
        // Utilizar directamente el archivo CSV preparado en lugar de generar desde JSON
        fetch('/static/frameworks/frameworks.csv')
            .then(response => response.blob())
            .then(blob => {
                // Crear enlace de descarga
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', 'frameworks_list.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            })
            .catch(error => {
                console.error('Error al descargar CSV:', error);
                alert('Error al descargar el archivo CSV. Por favor intenta nuevamente.');
            });
    });
});
</script>
{% endblock %} 