<!DOCTYPE html>
<!-- Banner de consentimiento de cookies -->
<div id="cookieConsent" style="display: none;">
    <div class="cookie-banner">
        <div class="cookie-content">
            <div class="cookie-header">
                <h3>Política de Cookies</h3>
            </div>
            <div class="cookie-body">
                <p>Utilizamos cookies propias para el funcionamiento esencial y cookies de terceros (Google Analytics) para analizar el uso de nuestro sitio.</p>
                <p><a href="/terminos#cookies">Más información</a></p>
            </div>
            <div class="cookie-actions">
                <button id="acceptAllCookies" class="btn-primary">Aceptar todas</button>
                <button id="acceptEssentialCookies" class="btn-secondary">Solo esenciales</button>
            </div>
        </div>
    </div>
</div>

<style>
    #cookieConsent {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 9999;
        padding: 6px;
    }
    
    .cookie-banner {
        max-width: 510px;
        margin: 0 auto;
        padding: 8px;
        background-color: #fff;
        border-radius: 5px;
        box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.1);
    }
    
    .cookie-content {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }
    
    .cookie-header h3 {
        margin: 0;
        font-size: 0.9rem;
        color: #333;
    }
    
    .cookie-body {
        font-size: 0.75rem;
        color: #555;
    }
    
    .cookie-body p {
        margin: 3px 0;
    }
    
    .cookie-body a {
        color: #007bff;
        text-decoration: underline;
    }
    
    .cookie-actions {
        display: flex;
        gap: 6px;
        margin-top: 4px;
    }
    
    .cookie-actions .btn-primary {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.7rem;
    }
    
    .cookie-actions .btn-secondary {
        background-color: #f8f9fa;
        color: #333;
        border: 1px solid #ddd;
        padding: 5px 10px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.7rem;
    }
    
    @media (max-width: 768px) {
        .cookie-banner {
            max-width: 95%;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Comprobar si ya existe consentimiento
        const cookieConsent = localStorage.getItem('cookieConsent');
        
        // Si no hay consentimiento registrado, mostrar el banner
        if (!cookieConsent) {
            document.getElementById('cookieConsent').style.display = 'block';
        }
        
        // Función para establecer el consentimiento
        function setConsent(analytics) {
            const consent = {
                essential: true, // Las cookies esenciales siempre se aceptan
                analytics: analytics
            };
            
            localStorage.setItem('cookieConsent', JSON.stringify(consent));
            
            // Ocultar el banner
            document.getElementById('cookieConsent').style.display = 'none';
            
            // Activar o desactivar Google Analytics según la elección
            if (analytics) {
                enableAnalytics();
            } else {
                disableAnalytics();
            }
        }
        
        // Función para activar Analytics
        function enableAnalytics() {
            window['ga-disable-G-HLV2V7L6SH'] = false;
            // Recargar la página para garantizar que se active correctamente
            location.reload();
        }
        
        // Función para desactivar Analytics
        function disableAnalytics() {
            window['ga-disable-G-HLV2V7L6SH'] = true;
        }
        
        // Event listeners para los botones
        document.getElementById('acceptAllCookies').addEventListener('click', function() {
            setConsent(true);
        });
        
        document.getElementById('acceptEssentialCookies').addEventListener('click', function() {
            setConsent(false);
        });
    });
</script> 